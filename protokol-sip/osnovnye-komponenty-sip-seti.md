# Основные компоненты SIP сети

Стандарт  SIP описан в RFC [3261](https://www.rfc-editor.org/info/rfc3261). А в дальнейшем расширен другими RFC.

Итак протокол SIP представляет собой клиент серверный текстовый протокол.

То есть, у нас есть клиент который посылает запрос в текстовом виде и есть сервер который обрабатывает этот запрос и отвечает на него. 

Итак у нас есть конечное устройство использующее протокол SIP \( у Гольдштейна это абонентский терминал\) например sip телефон. В RFC это User Agent \(UA\) Программное обеспечение UA Соответственно состоит из 2 частей: User Agent Сlient \(UAC \)  клиентом агента пользователя и User Agent Server \(UAS\) - сервером агента пользователя. Во время sip сессии 

Ниже представлен простой пример взаимодействия между двумя sip телефонами \(UA\)

![&#x412;&#x437;&#x430;&#x438;&#x43C;&#x43E;&#x434;&#x435;&#x439;&#x441;&#x442;&#x432;&#x438;&#x435; &#x43F;&#x43E; &#x43F;&#x440;&#x43E;&#x442;&#x43E;&#x43A;&#x43E;&#x43B;&#x443; SIP &#x43C;&#x435;&#x436;&#x434;&#x443; 2-&#x43C;&#x44F; &#x442;&#x435;&#x43B;&#x435;&#x444;&#x43E;&#x43D;&#x430;&#x43C;&#x438;](../.gitbook/assets/sip-ua-to-ua.png)

UA \(абонентский терминал\) должен как минимум выполнять следующие функции:

* должен сохранять состояние звонков которые он инициализировал или в которых он участвует. Даже если звонок был прерван UA должен сохранять состояние звонка в течении 32 сек в случае потери сообщений во время завершения SIP сессии.
* Запросы к неизвестному URI получают ответ _404  Not Found_ 
* UA игнорирует любой ACK полученный для неизвестного диалога
* Если UA  получает запрос для неизвестного ему диалога то он отправляет в ответ сообщение _481 Dialog/Transaction Does Not Exist_  
* Любые ответы для неизвестного диалога игнорируются.
* UA должен обрабатывать неизвестные ему ответы основываясь на классе ответа первой цифре в ответе. Например ответ с кодом 499 будет обработан как 400 
* На любой неизвестный запрос UA отвечает сообщением _501 Not Implemented_
* Для обработки сообщений больше 1300 байт UA **обязан** поддерживать TCP. 
* UA обязан поддерживать протокол SDP

\_\_

